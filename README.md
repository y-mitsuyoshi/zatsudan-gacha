# é›‘è«‡ãƒ†ãƒ¼ãƒã‚¬ãƒãƒ£ (Zatsudan Theme Gacha)

ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã®äº¤æµãŒå¢—ãˆã‚‹ä¸­ã€ãµã¨ã—ãŸé›‘è«‡ã®ãã£ã‹ã‘ã‚’è¦‹ã¤ã‘ã‚‹ã®ãŒé›£ã—ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã€Œé›‘è«‡ãƒ†ãƒ¼ãƒã‚¬ãƒãƒ£ã€ã¯ã€ãã‚“ãªæ‚©ã¿ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒœã‚¿ãƒ³ä¸€ã¤ã§ãƒ©ãƒ³ãƒ€ãƒ ãªä¼šè©±ã®ãƒ†ãƒ¼ãƒã‚’æä¾›ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å††æ»‘ã«ã—ã¾ã™ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

- **ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ†ãƒ¼ãƒ**: ã€Œè¶£å‘³ã€ã€Œæ—…è¡Œã€ã€Œä»•äº‹ã€ãªã©ã€æ§˜ã€…ãªã‚«ãƒ†ã‚´ãƒªã‹ã‚‰ãƒ†ãƒ¼ãƒã‚’çµã‚Šè¾¼ã‚ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã¶ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
- **ã‚¬ãƒãƒ£æ¼”å‡º**: ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ãƒ†ãƒ¼ãƒãŒé«˜é€Ÿã§åˆ‡ã‚Šæ›¿ã‚ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€ã‚¬ãƒãƒ£ã‚’å›ã™ãƒ¯ã‚¯ãƒ¯ã‚¯æ„Ÿã‚’æ¥½ã—ã‚ã¾ã™ã€‚
- **AIã«ã‚ˆã‚‹æ·±æ˜ã‚Š**: Gemini APIã‚’æ´»ç”¨ã—ã€é¸ã°ã‚ŒãŸãƒ†ãƒ¼ãƒã«å¯¾ã—ã¦ã€ŒAIã«æ·±æ˜ã‚Šè³ªå•ã‚’è€ƒãˆã¦ã‚‚ã‚‰ã†ã€æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¸€ã¤ã®ãƒ†ãƒ¼ãƒã‹ã‚‰ã•ã‚‰ã«ä¼šè©±ã‚’åºƒã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ğŸš€ ã¯ã˜ã‚ã«

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ã‹ã™ãŸã‚ã®æ‰‹é †ã§ã™ã€‚

### 1. å‰ææ¡ä»¶

- [Node.js](https://nodejs.org/) (`v22.14.0`ä»¥é™ã‚’æ¨å¥¨)
- [pnpm](https://pnpm.io/ja/) (v9ä»¥é™)
- [Git](https://git-scm.com/)

### 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹**
   ```bash
   git clone https://github.com/your-username/zatsudan-gacha.git
   cd zatsudan-gacha
   ```

2. **ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹**

   ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦`pnpm`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚`pnpm`ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
   ```bash
   npm install -g pnpm
   ```

   æº–å‚™ãŒã§ããŸã‚‰ã€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
   ```bash
   pnpm install
   ```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

AIã«ã‚ˆã‚‹æ·±æ˜ã‚Šæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ã€Google Gemini APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™ã€‚

1. **`.env.example`ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`.env.local`ã‚’ä½œæˆã—ã¾ã™ã€‚**
   ```bash
   cp .env.example .env.local
   ```

2. **`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ã‚ãªãŸã®APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚**
   ```
   GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
   ```
   APIã‚­ãƒ¼ã¯[Google AI Studio](https://aistudio.google.com/app/apikey)ã§å–å¾—ã§ãã¾ã™ã€‚

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚

```bash
pnpm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã‚’é–‹ãã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

## ğŸ› ï¸ ä½¿ç”¨æŠ€è¡“

- [Next.js](https://nextjs.org/) â€“ Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [React](https://react.dev/) â€“ UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [TypeScript](https://www.typescriptlang.org/) â€“ å‹ä»˜ã‘
- [Tailwind CSS](https://tailwindcss.com/) â€“ CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [Google Gemini API](https://ai.google.dev/) â€“ AIãƒ¢ãƒ‡ãƒ«

## ğŸ”¥ Firebaseã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯Firebase Hostingã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

### 1. Firebaseãƒ„ãƒ¼ãƒ«ã®æº–å‚™

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯`firebase-tools`ãŒé–‹ç™ºä¾å­˜é–¢ä¿‚ã¨ã—ã¦å«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚

```bash
npm install -g firebase-tools
```

### 2. Firebaseã¸ã®ãƒ­ã‚°ã‚¤ãƒ³

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§Firebaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

```bash
firebase login
```

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰

ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å‰ã«ã€Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
pnpm run build
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Šã€`out`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆé‡è¦ï¼‰

ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ã€æœ¬ç•ªç’°å¢ƒç”¨ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Next.jsã®é™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ã¯ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ç’°å¢ƒå¤‰æ•°ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ãŸã‚ã€**ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

1. **æœ¬ç•ªç”¨ã®`.env.local`ã‚’ä½œæˆ**
   ```bash
   cp .env.example .env.local
   ```

2. **å®Ÿéš›ã®APIã‚­ãƒ¼ã‚’è¨­å®š**
   `.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ã‚ãªãŸã®APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ï¼š
   ```bash
   GEMINI_API_KEY="YOUR_ACTUAL_GEMINI_API_KEY"
   ```

**âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …:**
- `.env.local`ã¯`.gitignore`ã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“
- ãŸã ã—ã€é™çš„ã‚µã‚¤ãƒˆã§ã¯APIã‚­ãƒ¼ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®JavaScriptã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ãŸã‚ã€å®Œå…¨ã«ç§˜åŒ¿ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“
- æœ¬ç•ªç’°å¢ƒã§ã¯ã€Gemini APIã‚­ãƒ¼ã«é©åˆ‡ãªåˆ¶é™ï¼ˆHTTPãƒªãƒ•ã‚¡ãƒ©ãƒ¼åˆ¶é™ãªã©ï¼‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™

### 5. ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œ

ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸçŠ¶æ…‹ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã‹ã‚‰Firebaseã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ï¼ˆã“ã®æ™‚ç‚¹ã§.env.localã®å€¤ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¾ã™ï¼‰
pnpm run build

# Firebaseã«ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy --only hosting
```

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹URLã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

### `.firebaserc.example` ã®ä½¿ã„æ–¹ï¼ˆé‡è¦ï¼‰

ãƒªãƒã‚¸ãƒˆãƒªã«ã¯å€‹äººã®Firebaseè¨­å®šã‚’å«ã‚€ `.firebaserc` ã‚’ç›´æ¥ã‚³ãƒŸãƒƒãƒˆã—ãªã„ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
`.firebaserc.example` ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’è¨­å®šã—ãŸ `.firebaserc`
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

æ‰‹é †:

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã¾ãŸã¯å–å¾—ã—ãŸå¾Œã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã«ç½®ãæ›ãˆã¾ã™ã€‚

```bash
cp .firebaserc.example .firebaserc
# ã‚‚ã—ãã¯ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ "REPLACE_WITH_YOUR_FIREBASE_PROJECT_ID" ã‚’å®Ÿéš›ã® projectId ã«æ›¸ãæ›ãˆã‚‹
```

2. `.firebaserc` ã¯ `.gitignore` ã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€èª¤ã£ã¦ãƒªãƒ¢ãƒ¼ãƒˆã«ä¸ŠãŒã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

3. ãã®å¾Œã€é€šå¸¸é€šã‚Šãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

```bash
pnpm run build
firebase deploy --only hosting
```

æ³¨æ„ç‚¹:

- è¤‡æ•°äººã§ä½œæ¥­ã™ã‚‹å ´åˆã¯ã€å„è‡ªãŒè‡ªåˆ†ã® `.firebaserc` ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å…±é€šã®è¨­å®šã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€`.firebaserc.example` ã‚’æ›´æ–°ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ’ãƒ³ãƒˆã‚’è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚
- ãƒªãƒã‚¸ãƒˆãƒªã«å«ã‚ã‚‹ã®ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¿ã¨ã—ã€å€‹äººç”¨ã®ã‚­ãƒ¼ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã¯ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„ã€‚

## ğŸ” ã‚ˆã‚Šå®‰å…¨ãªãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ¨å¥¨ï¼‰

APIã‚­ãƒ¼ã‚’ã‚ˆã‚Šå®‰å…¨ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€GitHub Actionsã‚’ä½¿ã£ãŸè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### GitHub Secretsã®è¨­å®š

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã® `Settings` > `Secrets and variables` > `Actions` ã‚’é–‹ã
2. `New repository secret` ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã®Secretã‚’è¿½åŠ ï¼š
   - `GEMINI_API_KEY`: ã‚ãªãŸã®Gemini APIã‚­ãƒ¼
   - `FIREBASE_TOKEN`: `firebase login:ci` ã§å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³

### GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä½œæˆ

`.github/workflows/deploy.yml` ã‚’ä½œæˆï¼š

```yaml
name: Deploy to Firebase Hosting

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'npm'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Build
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: npm run build
        
      - name: Deploy to Firebase
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: ${{ secrets.GITHUB_TOKEN }}
          firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT }}
          projectId: zatsudan-gacha
```

ã“ã®æ–¹æ³•ã«ã‚ˆã‚Šã€APIã‚­ãƒ¼ãŒãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚„ãƒªãƒã‚¸ãƒˆãƒªã«æ®‹ã‚‹ã“ã¨ãªãã€å®‰å…¨ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚
